<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="6WAYw55ioji2erHb-5NbNj-1UUxXejHX_e_PDEOf1Wg" />
    <meta name="google-adsense-account" content="ca-pub-7255009353291623">
    <title>NFL Weather Forecast - WxFantasyFootball</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/killenden/NFL_stats/main/docs/images/jared_goff.png">
    <link rel="stylesheet" href="styles.css">
    <script src="theme-toggle.js" defer></script>
</head>
<body>
    <div class="hero-section">
        <div class="hero-text">
            <h1>NFL Weather Forecast</h1>
            <p>Game Day Weather Conditions</p>
        </div>
    </div>
    
    <nav>
        <a href="index.html">Home</a>
        <a href="player.html">Player</a> 
        <a href="team.html">Team</a>
        <a href="weather.html" class="active">Weather</a>
        <a href="sleeper.html">Sleeper</a>
        <a href="about.html">About</a>
    </nav>

    <div class="container">
        <div class="stats-highlight">
            <h2>⚡ Live Weather Impact Analysis</h2>
            <p>Real-time weather forecasts for all NFL games with fantasy impact assessments</p>
        </div>

        <div class="about-section">
            <h2>Weather Forecast Summary</h2>
            <p>This page provides comprehensive weather forecasts for NFL games, including temperature, wind conditions, precipitation, and potential fantasy football impact. Data is sourced from GFS (Global Forecast System) models and updated regularly.</p>
        </div>

        <div class="weather-section">
            <h2>Game Day Weather Conditions</h2>
        
        <div class="table-container">
            <table id="weatherTable">
                <thead>
                    <tr>
                        <th>Game</th>
                        <th>Venue</th>
                        <th>Location</th>
                        <th>Roof</th>
                        <th>Kickoff (UTC)</th>
                        <th>Temp (°F)</th>
                        <th>Feels Like</th>
                        <th>Wind</th>
                        <th>Clouds</th>
                        <th>Precip</th>
                        <th>Weather Impact</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>

    // Path to csv
    const csvFilePath = 'https://raw.githubusercontent.com/killenden/NFL_stats/main/stats/weather/gfs_forecasts/nfl_forecast.csv';

        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',');
            const data = [];
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                for (let j = 0; j < headers.length; j++) {
                    row[headers[j]] = values[j];
                }
                data.push(row);
            }
            return data;
        }

        // Fetch CSV from file and populate table
        function populateTable() {
            fetch(csvFilePath)
                .then(response => {
                    if (!response.ok) throw new Error('CSV file not found.');
                    return response.text();
                })
                .then(csv => {
                    const data = parseCSV(csv);
                    const tbody = document.getElementById('tableBody');
                    tbody.innerHTML = '';
                    data.forEach(row => {
                        const tr = document.createElement('tr');
                        const windDir = getWindDirection(parseFloat(row.wind_dir));
                        const kickoffFormatted = formatKickoffTime(row.kickoff_utc);
                        tr.innerHTML = `
                            <td class="game-matchup">${row.game}</td>
                            <td class="venue">${row.venue}</td>
                            <td>${row.city}, ${row.state}</td>
                            <td><span class="${getRoofClass(row.roof_type)}">${row.roof_type}</span></td>
                            <td class="kickoff-time">${kickoffFormatted}</td>
                            <td class="temperature">${Math.round(row.temp_f)}°F</td>
                            <td>${Math.round(row.feels_like_f)}°F</td>
                            <td class="wind">${Math.round(row.wind_mph)} mph ${windDir}</td>
                            <td>${row.cloud_cover_pct}%</td>
                            <td>${row.precip_in}"</td>
                            <td><span class="weather-impact ${getWeatherImpactClass(row.weather_impact)}">${row.weather_impact}</span></td>
                        `;
                        tbody.appendChild(tr);
                    });
                })
                .catch(error => {
                    const tbody = document.getElementById('tableBody');
                    tbody.innerHTML = `<tr><td colspan="11">Error loading weather data: ${error.message}</td></tr>`;
                });
        }
        // ...existing code...
        function getWeatherImpactClass(impact) {
            if (impact.toLowerCase().includes('minimal')) return 'impact-minimal';
            if (impact.toLowerCase().includes('favorable')) return 'impact-favorable';
            if (impact.toLowerCase().includes('high winds') || impact.toLowerCase().includes('very hot')) return 'impact-high';
            return 'impact-moderate';
        }

        function getRoofClass(roofType) {
            if (roofType.toLowerCase() === 'closed') return 'roof-indoor';
            if (roofType.toLowerCase() === 'open') return 'roof-open';
            if (roofType.toLowerCase() === 'retractable') return 'roof-retractable';
            return '';
        }

        function formatKickoffTime(utcTime) {
            const date = new Date(utcTime);
            return date.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                timeZoneName: 'short'
            });
        }

        function getWindDirection(degrees) {
            const directions = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
            const index = Math.round(degrees / 22.5) % 16;
            return directions[index];
        }

        // Populate the table when the page loads
        document.addEventListener('DOMContentLoaded', populateTable);
    </script>

    <div class="copyright">
        <p>Copyright © 2025 Kyle Illenden, Anthony Illenden. Released under MIT License.</p>
        <p>LaPorta Potty Platoon</p>
    </div>
</body>
</html>
